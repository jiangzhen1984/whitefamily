<!DOCTYPE HTML  [
    <!ENTITY times "&#215;"> 
]>
<html xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:h="http://java.sun.com/jsf/html">
<ui:include src="../include/header.xhtml" />
<body>
	<div id="container">
		<ui:include src="../include/menu_top.xhtml" />
		<ui:include src="../include/nav.xhtml" />
<div id="content">
<h:form id="pform">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
      </div>
      <h1> 营收管理</h1>
      <ul class="breadcrumb">
        <li><a href="product_list.xhtml"> 营收统计</a></li>
      </ul>
    </div>
  </div>
  <div class="container-fluid">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-list"></i> <!-- text --></h3>
      </div>
      <div class="panel-body">
        <div class="well">
          <div class="row">
            <div class="col-sm-3">
            <label class="control-label" for="input-name">选择开始时间</label>
                 <div  id="datepickerstart">
                 <h:inputText  a:placeholder="开始时间" name="startDate"  id="startDate" value="#{incomingBean.startDate}" class="form-control" ><f:convertDateTime pattern="yyyy-MM-dd" /></h:inputText>              
                </div>
            </div>
            <div class="col-sm-3">
             <label class="control-label" for="input-name">选择结束时间</label>
               <div id="datepickerend">
                 <h:inputText  a:placeholder="开始时间" name="endDate"  id="endDate" value="#{incomingBean.endDate}" class="form-control" ><f:convertDateTime pattern="yyyy-MM-dd" /></h:inputText>              
                </div>
            </div>
             <div class="col-sm-3">
                 <label class="control-label" for="input-name">店铺</label>
                  <h:inputText   a:placeholder="查询店铺"  id="shopName"  class="form-control" ></h:inputText>
                  <h:inputHidden value="#{incomingBean.shopId}" id="shop_id" name="shop_id" ></h:inputHidden>
            </div>
            <div class="col-sm-2">
                <label class="control-label" for="input-name"><h:outputText value="&#160;" /></label>
                <h:commandLink  action="#{incomingBean.query}"  class="btn btn-primary pull-left"  ><i class="fa fa-search"></i>查询
               </h:commandLink>
              
           </div>
          </div>
        </div>
          <div class="table-responsive">
            <table class="table table-bordered table-hover">
              <thead>
                <tr> <td class="text-center" colspan="2">营收</td><td class="text-center" colspan="2">成本</td></tr>
                <tr>
                     <td class="text-center">总流水</td> <td class="text-center">#{incomingBean.incoming.zls}</td>
                     <td class="text-center">日用调料</td><td class="text-center">#{incomingBean.cost.rytl}</td>
                </tr>
                <tr>
                     <td class="text-center">现金</td><td class="text-center">#{incomingBean.incoming.cash}</td>
                     <td class="text-center">伙食费</td><td class="text-center">#{incomingBean.cost.hsf}</td>
                </tr>
                <tr>
                     <td class="text-center">微信</td><td class="text-center">#{incomingBean.incoming.weixin}</td>
                     <td class="text-center">房费</td><td class="text-center">#{incomingBean.cost.ff}</td>
                </tr>
                <tr>
                     <td class="text-center">外卖</td> <td class="text-center">#{incomingBean.incoming.delivery}</td>
                     <td class="text-center">工资</td><td class="text-center">#{incomingBean.cost.gz}</td>
                </tr>
              </thead>
            </table>
          </div>
        <div class="row">
        </div>
      </div>
    </div>
  </div>
  </h:form>
</div>
<footer id="footer"><br /></footer></div>
<script type="text/javascript">
  var d;
  var pickerObject;
  $(function () {
      d = $('#datepickerstart').datetimepicker({ todayHighlight:'TRUE', format : "YYYY-MM-DD", autoclose : true, pickTime :false});
      pickerObject = d.data();
      pickerObject.pickTime = false;
      d.on("change", function(a, b) {
           d.datetimepicker('remove');
      });
      
  });
  
  var d1;
  var pickerObject1;
  $(function () {
      d1 = $('#datepickerend').datetimepicker({ todayHighlight:'TRUE', format : "YYYY-MM-DD", autoclose : true, pickTime :false});
      pickerObject1 = d1.data();
      pickerObject1.pickTime = false;
      d1.on("change", function(a, b) {
           d1.datetimepicker('remove');
      });
      
  });
</script>

  <script type="text/javascript"><!--

$('input[name=\'pform:shopName\']').autocomplete({
	'source': function(request, response) {
		$.ajax({
			url: 'filterShop.ajax?action=filterShop&filter=' +  encodeURIComponent(request),
			dataType: 'json',
			success: function(json) {
				json.unshift({
					shop_id: 0,
					name: ''
				});

				response($.map(json, function(item) {
					return {
						label: item['name'],
						value: item['id']
					}
				}));
			}
		});
	},
	'select': function(item) {
		$('input[name=\'pform:shopName\']').val(item['label']);
		$('input[name=\'pform:shop_id\']').val(item['value']);
	}
});


//--></script>



</body></html>

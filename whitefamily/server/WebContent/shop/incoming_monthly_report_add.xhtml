<!DOCTYPE HTML  [
    <!ENTITY times "&#215;"> 
]>
<html xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:h="http://java.sun.com/jsf/html">
<ui:include src="../include/header.xhtml" />
<body>
	<div id="container">
		<ui:include src="../include/menu_top.xhtml" />
		<ui:include src="../include/nav.xhtml" />
<div id="content">
<h:form id="pform">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
          <h:commandLink  action="#{incomingBean.reportMonthlyCost}" type="submit"  form="form-product" data-toggle="tooltip" title="保存" class="btn btn-primary">
              <i class="fa fa-plus">保存</i>
        </h:commandLink>
            <a href="incoming_monthly_report.xhtml" data-toggle="tooltip" title="取消" class="btn btn-default"><i class="fa fa-reply">返回</i></a>
      </div>
      <h1> 营收管理</h1>
      <ul class="breadcrumb">
        <li>支出月报表</li>
      </ul>
    </div>
  </div>
  <div class="container-fluid">
     <c:if test="${not empty incomingBean.errMsg}">
    <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i><h:outputText value="#{incomingBean.errMsg}" ></h:outputText>
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    </c:if>
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-list"></i> <!-- text --></h3>
      </div>
      <div class="panel-body">
          <div class="table-responsive">
            <table class="table table-bordered table-hover">
              <thead>
                <tr>
                     <td class="text-center">店铺</td> <td class="text-center">
                     	<h:inputText   a:placeholder="店铺"  id="shopName"  value="#{incomingBean.rshopName}"  class="form-control" ></h:inputText>
                  		<h:inputHidden value="#{incomingBean.rshopId}" id="shop_id" name="shop_id" ></h:inputHidden>
                     </td>
                     <td class="text-center">房费</td>
                     <td class="text-center"><h:inputText  class="form-control" value="#{incomingBean.monthlyCost.monthlyFf}" ></h:inputText></td>
                     <td class="text-center">水费</td><td class="text-center"><h:inputText   class="form-control" value="#{incomingBean.monthlyCost.monthlySf}" ></h:inputText></td>
                     <td class="text-center">电费</td><td class="text-center"><h:inputText    class="form-control" value="#{incomingBean.monthlyCost.monthlyDf}" ></h:inputText></td>
                     <td class="text-center">燃气费</td><td class="text-center"><h:inputText    class="form-control" value="#{incomingBean.monthlyCost.monthlyRqf}" ></h:inputText></td>
                </tr>
              </thead>
            </table>
          </div>
        <div class="row">
         <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-list"></i>工资</h3>
        </div>
        <div class="table-responsive">
            <table id="ec" class="table table-bordered table-hover">
              <thead>
                   <tr>
                     <td class="text-center  col-md-２">员工</td>
                     <td class="text-center col-md-２">工资</td>
                     <td class="text-center col-md-２">奖金</td>
                     <td class="text-center col-md-２">工龄工资</td>
                     <td class="text-center col-md-２">全勤</td>
                     <td class="text-center col-md-２">补助</td>
                     <td class="text-center col-md-２">缺勤</td>
                     <td class="text-center col-md-２">病事假</td>
                     <td class="text-center col-md-２">入职押金</td>
                     <td class="text-center col-md-２">罚款</td>
                     <td class="text-center col-md-２">实发工资</td>
                     
                     <td></td>
                   </tr>
                 </thead>
                 <tbody>
                   <ui:repeat var="o" value="#{incomingBean.monthlyCost.employeesCost}" varStatus="status">
                   <tr id="wfa-row#{status.index}">
                      <td class="text-left"><input type="text"  name="names"  placeholder="姓名" class="form-control"  value="#{o.name}"/></td>
	                  <td class="text-right"><input type="text"  class="form-control" name="salars"   placeholder="工资"  value="#{o.salary}"  /></td>
	                  <td class="text-right"><input type="text"  class="form-control" name="bonus"    placeholder="奖金"    value="#{o.bonus}"   /></td>
	                   <td class="text-right"><input type="text"  class="form-control" name="senority"   placeholder="工龄工资"     value="#{o.seniorityAllowance}"  /></td>
	                   <td class="text-right"><input type="text"  class="form-control" name="attendence"   placeholder="全勤"     value="#{o.perfectAttendence}"  /></td>
	                   <td class="text-right"><input type="text"  class="form-control" name="compensation"   placeholder="补助"   value="#{o.compensation}"    /></td>
	                   <td class="text-right"><input type="text"  class="form-control" name="absence"   placeholder="缺席"     value="#{o.absence}"  /></td>
	                   <td class="text-right"><input type="text"  class="form-control" name="illness"   placeholder="病事假"     value="#{o.illness}"  /></td>
	                   <td class="text-right"><input type="text"  class="form-control" name="deposit"   placeholder="押金"    value="#{o.deposit}"   /></td>
	                   <td class="text-right"><input type="text"  class="form-control" name="fine"   placeholder="罚款"     value="#{o.fine}"  /></td>
	                   <td class="text-right"><input type="text"  class="form-control" name="real"   placeholder="实发工资"     value="#{o.real}"  /></td>
	                   <td class="text-right"><input type="text"  class="form-control" name="desc"   placeholder="备注"    value="#{o.desc}"   /></td>
                    <td class="text-left"><button type="button" onclick="$('#wfa-row#{status.index}').remove();" data-toggle="tooltip" title="移除" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                   </tr>
                   </ui:repeat>
                 </tbody>
                  <tfoot>
                   <tr>
                     <td colspan="2"></td>
                     <td class="text-left"><button type="button" onclick="addEc();" data-toggle="tooltip" title="添加" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                   </tr>
                 </tfoot>
            </table>
          </div>
          
          <div class="table-responsive">
            <table class="table table-bordered table-hover">
              <thead>
                <tr>
                     <td class="text-center">备注</td> 
                     <td class="text-center">
                     	<h:inputText   a:placeholder="金额"   value="#{incomingBean.monthlyCost.others}"  class="form-control" ></h:inputText>
                     </td>
                </tr>
              </thead>
            </table>
          </div>
          
        </div>
      </div>
    </div>
  </div>
  </h:form>
</div>
<footer id="footer"><br /></footer></div>
  <script type="text/javascript">
   //<![CDATA[
$('input[name=\'pform:shopName\']').autocomplete({
	'source': function(request, response) {
		$.ajax({
			url: 'filterShop.ajax?action=filterShop&filter=' +  encodeURIComponent(request),
			dataType: 'json',
			success: function(json) {
				response($.map(json, function(item) {
					return {
						label: item['name'],
						value: item['id']
					}
				}));
			}
		});
	},
	'select': function(item) {
		$('input[name=\'pform:shopName\']').val(item['label']);
		$('input[name=\'pform:shop_id\']').val(item['value']);
	}
});


var ec_row = $('input[name=\'pform:ec\']').length;

function addEc() {
	    var html ='';
	    html +='<tr id="wfa-row'+ec_row+'">';
	    html +='<td class="text-left"><input type="text"  name="names"  placeholder="姓名" class="form-control" /></td>';
	    html +='<td class="text-right"><input type="text"  class="form-control" name="salars"   placeholder="工资"    /></td>';
	    html +='<td class="text-right"><input type="text"  class="form-control" name="bonus"    placeholder="奖金"    /></td>';
	    html +='<td class="text-right"><input type="text"  class="form-control" name="senority"   placeholder="工龄工资"    /></td>';
	    html +='<td class="text-right"><input type="text"  class="form-control" name="attendence"   placeholder="全勤"    /></td>';
	    html +='<td class="text-right"><input type="text"  class="form-control" name="compensation"   placeholder="补助"    /></td>';
	    html +='<td class="text-right"><input type="text"  class="form-control" name="absence"   placeholder="缺席"    /></td>';
	    html +='<td class="text-right"><input type="text"  class="form-control" name="illness"   placeholder="病事假"    /></td>';
	    html +='<td class="text-right"><input type="text"  class="form-control" name="deposit"   placeholder="押金"    /></td>';
	    html +='<td class="text-right"><input type="text"  class="form-control" name="fine"   placeholder="罚款"    /></td>';
	    html +='<td class="text-right"><input type="text"  class="form-control" name="real"   placeholder="实发工资"    /></td>';
	    html +='<td class="text-right"><input type="text"  class="form-control" name="desc"   placeholder="备注"    /></td>';
	    html +='<td class="text-left"><button type="button" onclick="$(\'#wfa-row'+ec_row+'\').remove();" data-toggle="tooltip" title="移除" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
	    html +=' </tr>';

		$('#ec tbody').append(html);

		ec_row++;
}

 //]]>

</script>



</body></html>
